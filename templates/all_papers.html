{% extends "base.html" %}
{% block title %}All Papers{% endblock %}
{% block content %}
<h1 class="mt-4">All Papers</h1>
<form method="post">
    <div class="mb-3">
        <button type="submit" name="action" value="move_to_unread" class="btn btn-primary">Move to Unread</button>
        <button type="submit" name="action" value="move_to_left_swiped" class="btn btn-danger">Move to Swiped Left</button>
    </div>
    <table class="table table-striped table-hover mt-3">
        <thead>
            <tr>
                <th><input type="checkbox" id="select_all"></th>
                <th>Title</th>
                <th>Status</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for paper in papers %}
            <tr>
                <td><input type="checkbox" name="selected_papers" value="{{ paper.paper_id }}"></td>
                <td>{{ paper.title }}</td>
                <td>
                    {% if paper.status == 'unread' %}
                        <span title="Unread">
                            <i class="fas fa-bookmark"></i> Unread
                        </span>
                    {% elif paper.status == 'in_review' %}
                        <span title="In Review">
                            <i class="fas fa-hourglass-half"></i> In Review
                        </span>
                    {% elif paper.status == 'read' %}
                        <span title="Read">
                            <i class="fas fa-check-circle"></i> Read
                        </span>
                    {% elif paper.status == 'left_swiped' %}
                        <span title="Swiped Left">
                            <i class="fas fa-times-circle"></i> Swiped Left
                        </span>
                    {% else %}
                        {{ paper.status }}
                    {% endif %}
                </td>
                <td>
                    <a href="{{ url_for('view_paper', paper_id=paper.paper_id.replace('http://', '')) }}">View & Take Notes</a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</form>

<!-- Include Font Awesome for icons -->
{% block scripts %}
<script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
<script>
    // Select/Deselect all checkboxes
    document.getElementById('select_all').onclick = function() {
        var checkboxes = document.getElementsByName('selected_papers');
        for (var checkbox of checkboxes) {
            checkbox.checked = this.checked;
        }
    }
</script>
{% endblock %}
{% endblock %}

